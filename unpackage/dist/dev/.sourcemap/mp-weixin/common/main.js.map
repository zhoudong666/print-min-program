{"version":3,"sources":["uni-app:///main.js",null,"webpack:///E:/Project-Code/online-project/print-min-program/App.vue?caea","uni-app:///App.vue","webpack:///E:/Project-Code/online-project/print-min-program/App.vue?19b0","webpack:///E:/Project-Code/online-project/print-min-program/App.vue?a1ed"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","Vue","prototype","$goToUrl","goToUrl","$checkIsLogin","checkIsLogin","$goLogin","goLogin","$wxOpenSetting","wxOpenSetting","$Q","request","$prefix","requestUrl","$api","api","getUrl","config","productionTip","App","mpType","app","$mount"],"mappings":"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","file":"common/main.js","sourcesContent":["import 'uni-pages';\r\n// @ts-ignore\r\nwx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;import Vue from \"vue\";\r\nimport App from \"./App\";\r\n\r\nimport \"./utils/filters\";\r\n// 请求 request 设置\r\nimport request from \"./utils/request.js\";\r\nimport { goToUrl, checkIsLogin, goLogin } from \"@/utils/login.js\";\r\nVue.prototype.$goToUrl = goToUrl;\r\nVue.prototype.$checkIsLogin = checkIsLogin;\r\nVue.prototype.$goLogin = goLogin;\r\n\r\nimport { wxOpenSetting } from \"@/utils/utils.js\";\r\nVue.prototype.$wxOpenSetting = wxOpenSetting;\r\n// 接口\r\nimport api from \"@/utils/api.js\";\r\n\r\nimport \"./assets/main.scss\";\r\nimport \"./assets/common.css\";\r\n\r\nimport { requestUrl } from \"./urlConfig\";\r\n\r\nVue.prototype.$Q = request;\r\nVue.prototype.$prefix = requestUrl;\r\n\r\n// 用法 this.$api(url,params) // url:请求地址名称 params:拼接参数\r\nVue.prototype.$api = api.getUrl;\r\n\r\nVue.config.productionTip = false;\r\n\r\nApp.mpType = \"app\";\r\n\r\nconst app = new Vue({ ...App });\r\n\r\n\r\napp.$mount(); //为了兼容小程序及app端必须这样写才有效果","var render, staticRenderFns, recyclableRender, components\nvar renderjs\nimport script from \"./App.vue?vue&type=script&lang=js&\"\nexport * from \"./App.vue?vue&type=script&lang=js&\"\nimport style0 from \"./App.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!D:\\\\package\\\\HBuilderX.3.5.3.20220729\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\runtime\\\\componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"App.vue\"\nexport default component.exports","import mod from \"-!D:\\\\package\\\\HBuilderX.3.5.3.20220729\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!D:\\\\package\\\\HBuilderX.3.5.3.20220729\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!D:\\\\package\\\\HBuilderX.3.5.3.20220729\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!D:\\\\package\\\\HBuilderX.3.5.3.20220729\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\package\\\\HBuilderX.3.5.3.20220729\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./App.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!D:\\\\package\\\\HBuilderX.3.5.3.20220729\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!D:\\\\package\\\\HBuilderX.3.5.3.20220729\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!D:\\\\package\\\\HBuilderX.3.5.3.20220729\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!D:\\\\package\\\\HBuilderX.3.5.3.20220729\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\package\\\\HBuilderX.3.5.3.20220729\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./App.vue?vue&type=script&lang=js&\"","<script>\r\nimport request from \"./utils/request.js\";\r\nimport api from \"@/utils/api.js\";\r\nexport default {\r\n  globalData: {\r\n    shopName: \"\", // 店铺名称  --共用\r\n    shopCode: \"\", // 店铺code  --共用\r\n    shopAddress: \"\", // 店铺地址  --共用\r\n    shopLogo: \"\", // 店铺Logo  --共用\r\n    deviceNo: \"\", // 打印机编号  --共用\r\n    deviceName: \"\", // 打印机名字  --共用\r\n    deviceMsg: \"\", // 打印机描述  --共用\r\n    shopInfoList: [\"shopName\", \"shopCode\", \"shopAddress\"],\r\n    deviceInfoList: [\"deviceNo\", \"deviceName\", \"deviceMsg\"],\r\n    flowCode: \"\", // 打印任务流水号  --共用\r\n    ossToPdfCode: \"\", // oss转pdf后生成的code\r\n    setParamType: \"\", // 打印文件类型 wxFile wxImg localFile localImg\r\n    wxFile: [], // 存储已选打印文件\r\n    wxImg: [], // 存储已选打印图片\r\n    localFile: [], // 存储已选打印文件\r\n    localImg: [], // 存储已选打印图片\r\n    printParams: [], // 存储选取文件默认参数\r\n    allFile: [], // 所有已选文件\r\n    fileParam: {}, // 打印文件修改参数\r\n    fileParamIndex: 0, // 被修改文件参数的索引,\r\n    printFilesSetting: {}, // 最终提交参数\r\n    basketIds: [], // 预打印文件id\r\n    isPrintOrCopyOrScan: \"copy\", // 判断入口是 打印 复印 还是 扫描\r\n    isAuthCamera: false, // 用于中间的tabbar扫描时检测是否开启摄像头\r\n    isNearShop: false, // 记录是否是从附近店铺进入的flag 用于跳过打印机选择页面\r\n    isFromScanQcode: false, // 用于打印机选择页,通过扫描跳转来时,进行下一步操作\r\n    isTabbarScan: \"\", // 用于记录是否从tabbar扫描进入到店铺详情页\r\n  },\r\n  onLaunch: function () {},\r\n  onShow: function () {\r\n    var tokenTime = uni.getStorageSync(\"setTokenTime\");\r\n    // if(!tokenTime) return;\r\n    var disTime = +new Date() - tokenTime;\r\n    // 每次显示, 每距离上次token保存时间, 相差10 分钟 检测一下token是否过期\r\n    if (disTime < 10 * 60 * 1000) return;\r\n    this.reloadToken();\r\n  },\r\n  onHide: function () {},\r\n  methods: {\r\n    // 生成flowCode\r\n    newFlowCode() {\r\n      return new Promise(async (resolve) => {\r\n        const type = this.globalData.isPrintOrCopyOrScan;\r\n        this.globalData.flowCode = await request.get({\r\n          url: api.getUrl(type + \"_taskFlowId\"),\r\n        });\r\n        resolve(true);\r\n      });\r\n    },\r\n    // 刷新token\r\n    reloadToken() {\r\n      uni.login({\r\n        provider: \"weixin\",\r\n        success: (res) => {\r\n          if (!res.code) return; //微信登录成功  已拿到code请求后台\r\n          request.post({\r\n            url: api.getUrl(\"login\"),\r\n            data: { principal: res.code }, //uni.login 登录成功后的code\r\n            success: (re) => {\r\n              uni.setStorageSync(\"token\", \"bearer\" + re.access_token);\r\n              uni.setStorageSync(\"setTokenTime\", +new Date());\r\n            },\r\n          });\r\n        },\r\n      });\r\n    },\r\n    // 再次打印 共用\r\n    async printAgain(orderNumber) {\r\n      const res = await request.get({\r\n        url: api.getUrl(\"repeatTaskFlow\"),\r\n        data: { orderNumber },\r\n      });\r\n      this.globalData.isPrintOrCopyOrScan = \"print\";\r\n      this.globalData.flowCode = res;\r\n      this.getPrintParams();\r\n    },\r\n    // 获取打印文件和设置参数\r\n    async getPrintParams() {\r\n      var data = {\r\n        flowCode: this.globalData.flowCode,\r\n        deviceNo: this.globalData.deviceNo,\r\n      };\r\n      const printParams = await request.put({\r\n        url: api.getUrl(\"getPrintParams\"),\r\n        data,\r\n      });\r\n      this.globalData.printParams = printParams;\r\n      this.$vm.$goToUrl(\"/pages/printSteps/setParams\");\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style>\r\n/*每个页面公共css */\r\n\r\n/*  重写 radio 样式  */\r\n/* 未选中的 背景样式 */\r\nradio .wx-radio-input {\r\n  border-radius: 50%; /* 圆角 */\r\n  width: 40rpx;\r\n  height: 40rpx;\r\n  border: 2rpx solid #ff9966;\r\n}\r\n/* 这里如果不能修改背景颜色，在选中后的样式中添加background-color */\r\n/* 选中后的 背景样式 （红色背景 无边框 可根据UI需求自己修改） */\r\nradio .wx-radio-input.wx-radio-input-checked {\r\n  border: 2rpx solid #ff9966;\r\n  background: #ff9966;\r\n}\r\n/* 选中后的 对勾样式 （白色对勾 可根据UI需求自己修改） */\r\nradio .wx-radio-input.wx-radio-input-checked::before {\r\n  border-radius: 50%; /* 圆角 */\r\n  width: 40rpx; /* 选中后对勾大小，不要超过背景的尺寸 */\r\n  height: 40rpx; /* 选中后对勾大小，不要超过背景的尺寸 */\r\n  line-height: 40rpx;\r\n  text-align: center;\r\n  font-size: 30rpx; /* 对勾大小 30rpx */\r\n  color: #fff; /* 对勾颜色 白色 */\r\n  background: transparent;\r\n  transform: translate(-50%, -50%) scale(1);\r\n  -webkit-transform: translate(-50%, -50%) scale(1);\r\n}\r\n\r\n/* 重写 checkbox 样式 */\r\n/* 未选中的 背景样式 */\r\ncheckbox .wx-checkbox-input {\r\n  /* border-radius: 50%; */ /* 圆角 */\r\n  border: 2rpx solid #ff9966;\r\n  width: 40rpx; /* 背景的宽 */\r\n  height: 40rpx; /* 背景的高 */\r\n}\r\n/* 这里如果不能修改背景颜色，在选中后的样式中添加background-color */\r\n/* 选中后的 背景样式 （红色背景 无边框 可根据UI需求自己修改） */\r\ncheckbox .wx-checkbox-input.wx-checkbox-input-checked {\r\n  border: 2rpx solid #ff9966;\r\n  background: #ff9966;\r\n}\r\n/* 选中后的 对勾样式 （白色对勾 可根据UI需求自己修改） */\r\ncheckbox .wx-checkbox-input.wx-checkbox-input-checked::before {\r\n  border-radius: 50%; /* 圆角 */\r\n  width: 40rpx; /* 选中后对勾大小，不要超过背景的尺寸 */\r\n  height: 40rpx; /* 选中后对勾大小，不要超过背景的尺寸 */\r\n  line-height: 40rpx;\r\n  text-align: center;\r\n  font-size: 30rpx; /* 对勾大小 30rpx */\r\n  color: #fff; /* 对勾颜色 白色 */\r\n  background: transparent;\r\n  transform: translate(-50%, -50%) scale(1);\r\n  -webkit-transform: translate(-50%, -50%) scale(1);\r\n}\r\n</style>\r\n","import mod from \"-!D:\\\\package\\\\HBuilderX.3.5.3.20220729\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--6-oneOf-1-0!D:\\\\package\\\\HBuilderX.3.5.3.20220729\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--6-oneOf-1-1!D:\\\\package\\\\HBuilderX.3.5.3.20220729\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!D:\\\\package\\\\HBuilderX.3.5.3.20220729\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--6-oneOf-1-2!D:\\\\package\\\\HBuilderX.3.5.3.20220729\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--6-oneOf-1-3!D:\\\\package\\\\HBuilderX.3.5.3.20220729\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\package\\\\HBuilderX.3.5.3.20220729\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./App.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!D:\\\\package\\\\HBuilderX.3.5.3.20220729\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--6-oneOf-1-0!D:\\\\package\\\\HBuilderX.3.5.3.20220729\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--6-oneOf-1-1!D:\\\\package\\\\HBuilderX.3.5.3.20220729\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!D:\\\\package\\\\HBuilderX.3.5.3.20220729\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--6-oneOf-1-2!D:\\\\package\\\\HBuilderX.3.5.3.20220729\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--6-oneOf-1-3!D:\\\\package\\\\HBuilderX.3.5.3.20220729\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\package\\\\HBuilderX.3.5.3.20220729\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./App.vue?vue&type=style&index=0&lang=css&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1666519243341\n      var cssReload = require(\"D:/package/HBuilderX.3.5.3.20220729/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}