{"version":3,"sources":["uni-app:///main.js","webpack:///E:/online-project1/print-min-program/pages/shopInfo/index.vue?a55b","webpack:///E:/online-project1/print-min-program/pages/shopInfo/index.vue?02c8","webpack:///E:/online-project1/print-min-program/pages/shopInfo/index.vue?51a2","webpack:///E:/online-project1/print-min-program/pages/shopInfo/index.vue?8c00","uni-app:///pages/shopInfo/index.vue","webpack:///E:/online-project1/print-min-program/pages/shopInfo/index.vue?45ab","webpack:///E:/online-project1/print-min-program/pages/shopInfo/index.vue?f1a6"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page"],"mappings":";;;;;;;;;;kDAAA;;;AAGA;AACA,+F,8FAHA;AACAA,EAAE,CAACC,iCAAH,GAAuCC,mBAAvC,CAGAC,UAAU,CAACC,cAAD,CAAV,C;;;;;;;;;;;;;ACLA;AAAA;AAAA;AAAA;AAAA;AAAA;AAA8H;AAC9H;AACyD;AACL;AACsC;;;AAG1F;AAC4K;AAC5K,gBAAgB,qLAAU;AAC1B,EAAE,2EAAM;AACR,EAAE,4FAAM;AACR,EAAE,qGAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,gGAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACRA;AAAA;AAAA;AAAA;AAAkoB,CAAgB,upBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACwFtpB;AACA,MADA,kBACA;AACA;AACA,kBADA;AAEA,cAFA;AAGA;AACA,uCADA;AAEA,uCAFA;AAGA,sCAHA,CAHA;;AAQA,kBARA;AASA;AACA,mBADA;AAEA,kBAFA;AAGA,kBAHA,EATA;;;AAeA,GAjBA;AAkBA,QAlBA,kBAkBA,OAlBA,EAkBA;AACA;AACA;AACA,sBADA,GACA,wCADA;AAEA,uBAFA,GAEA,yBAFA;AAGA;AACA,eANA;AAOA,GAzBA;AA0BA;AACA,QA3BA,oBA2BA;AACA,oDADA,CACA;AACA;AACA,GA9BA;AA+BA,QA/BA,oBA+BA;AACA;AACA,GAjCA;AAkCA,SAlCA,qBAkCA,EAlCA;AAmCA;AACA,eADA,uBACA,KADA,EACA;;AAEA,qBAFA;;AAIA,uEAJA,SAIA,GAJA;AAKA,2CALA;;AAOA;AACA,wBARA,GAQA,4BARA,EAQA;AARA,2CASA,uDATA,SASA,GATA;;;AAYA;AACA;AACA;AACA;AACA,oFADA;AAEA,kBAFA,CAfA;AAkBA,KAnBA;AAoBA,eApBA,uBAoBA,GApBA,EAoBA;AACA;AACA,KAtBA;AAuBA,WAvBA,mBAuBA,KAvBA,EAuBA;AACA,gEADA;AAEA,yCAFA;AAGA,iEAHA;AAIA,qBAJA,GAIA;AACA,2EADA;AAEA,iBAFA,CAJA;AAOA,8BAPA,GAOA,kCAPA;AAQA;AACA;AACA,iBAFA;AAGA,4BAXA,GAWA,gCAXA;AAYA;AACA;AACA,iBAFA,EAZA;;AAgBA,wCAhBA,WAgBA;AACA;AACA;AACA;AACA,iBAHA,MAGA;AACA;AACA;AACA,iBAvBA;AAwBA,KA/CA,EAnCA,E;;;;;;;;;;;;;ACxFA;AAAA;AAAA;AAAA;AAAiuC,CAAgB,8rCAAG,EAAC,C;;;;;;;;;;;ACArvC;AACA,OAAO,KAAU,EAAE,kBAKd","file":"pages/shopInfo/index.js","sourcesContent":["import 'uni-pages';\n// @ts-ignore\nwx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;\nimport Vue from 'vue'\nimport Page from './pages/shopInfo/index.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./index.vue?vue&type=template&id=e3ed4e00&scoped=true&\"\nvar renderjs\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=e3ed4e00&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!D:\\\\softs\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\runtime\\\\componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"e3ed4e00\",\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/shopInfo/index.vue\"\nexport default component.exports","export * from \"-!D:\\\\softs\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\templateLoader.js??vue-loader-options!D:\\\\softs\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--16-0!D:\\\\softs\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\template.js!D:\\\\softs\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-uni-app-loader\\\\page-meta.js!D:\\\\softs\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\softs\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./index.vue?vue&type=template&id=e3ed4e00&scoped=true&\"","var components\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!D:\\\\softs\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!D:\\\\softs\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!D:\\\\softs\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!D:\\\\softs\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\softs\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!D:\\\\softs\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!D:\\\\softs\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!D:\\\\softs\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!D:\\\\softs\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\softs\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./index.vue?vue&type=script&lang=js&\"","<template>\r\n  <view class=\"app-container padding-20\">\r\n    <view class=\"shop-card bg-white bd-radius-10 padding-20\">\r\n      <view class=\"info\">\r\n        <image\r\n          class=\"icon-shop margin-right-15\"\r\n          :src=\"list.shopLogo\"\r\n          mode=\"scaleToFill\"\r\n        ></image>\r\n        <view class=\"info-content\">\r\n          <view class=\"title c-title fs-36\">\r\n            <text>{{\r\n              list.school ? list.school + \"-\" + list.shopName : list.shopName\r\n            }}</text>\r\n          </view>\r\n          <view class=\"shopAddress c-grey fs-32 margin-top-15 margin-bottom-15\">\r\n            <image\r\n              class=\"icon-point margin-right-10\"\r\n              src=\"../../static/icon/icon-location.png\"\r\n              mode=\"scaleToFill\"\r\n            ></image>\r\n            <text>位置：{{ list.shopAddress }}</text>\r\n          </view>\r\n          <view class=\"support fs-28\">\r\n            <text>支持：</text>\r\n            <text\r\n              v-for=\"(item, index) in list.shopSupports\"\r\n              :key=\"item.code\"\r\n              class=\"support-tip margin-right-20\"\r\n            >\r\n              {{ item.desc }}\r\n            </text>\r\n          </view>\r\n        </view>\r\n      </view>\r\n      <!-- <view class=\"price fs-24 bd-radius-10\">\r\n        <view v-for=\"(item, index) in priceList\" :key=\"index\">\r\n          <view class=\"price-item\">\r\n            <text class=\"c-grey\">{{ item.name }}</text>\r\n            <text>￥{{ item.value }}</text>\r\n          </view>\r\n        </view>\r\n      </view> -->\r\n    </view>\r\n    <view\r\n      v-show=\"!list.prints.length\"\r\n      class=\"fs-36 bg-white margin-top-20 margin-bottom-20 padding-20\"\r\n    >\r\n      <view class=\"prints-header fs-32-fw-bold tac padding-20\"\r\n        >暂无可选打印机</view\r\n      >\r\n    </view>\r\n    <view\r\n      v-show=\"list.prints.length > 0\"\r\n      class=\"prints fs-32 bg-white padding-20 margin-top-20 margin-bottom-20\"\r\n    >\r\n      <view class=\"prints-header fs-36-fw-bold margin-bottom-30\"\r\n        >选择打印机</view\r\n      >\r\n      <radio-group class=\"radio-group\" @change=\"radioChange\">\r\n        <label\r\n          v-for=\"(item, index) in list.prints\"\r\n          :key=\"item.deviceNo\"\r\n          class=\"margin-bottom-20\"\r\n        >\r\n          <radio :value=\"item.deviceNo\" :checked=\"item.deviceNo === deviceNo\" />\r\n          <text>{{ item.deviceName }}</text>\r\n        </label>\r\n      </radio-group>\r\n    </view>\r\n    <view\r\n      v-show=\"list.prints.length\"\r\n      class=\"btn-container flex justify-content-around\"\r\n    >\r\n      <button\r\n        v-for=\"item in supports\"\r\n        :key=\"item\"\r\n        type=\"primary\"\r\n        size=\"mini\"\r\n        @tap.stop=\"toPrint(typeMap[item])\"\r\n      >\r\n        前去{{ item }}\r\n      </button>\r\n    </view>\r\n  </view>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  data() {\r\n    return {\r\n      deviceNo: \"\",\r\n      list: {},\r\n      priceList: [\r\n        { name: \"A4黑白单面\", value: \"0.15\" },\r\n        { name: \"A4黑白双面\", value: \"0.25\" },\r\n        { name: \"身份证黑白\", value: \"0.15\" },\r\n      ],\r\n      supports: [],\r\n      typeMap: {\r\n        打印: \"print\",\r\n        复印: \"copy\",\r\n        扫描: \"scan\",\r\n      },\r\n    };\r\n  },\r\n  async onLoad(options) {\r\n    // 处理通过微信的扫码进来的情形\r\n    if (options.q) {\r\n      const urlArr = decodeURIComponent(options.q).split(\"/\");\r\n      const urlCode = urlArr[urlArr.length - 1];\r\n      getApp().globalData.isTabbarScan = urlCode;\r\n    }\r\n  },\r\n  // onshow和onhide触发多次\r\n  onShow() {\r\n    const deviceNo = getApp().globalData.isTabbarScan; // 由扫码得到设备号进行查询\r\n    this.getShopInfo(deviceNo);\r\n  },\r\n  onhide() {\r\n    uni.removeStorageSync(\"shopInfo\");\r\n  },\r\n  mounted() {},\r\n  methods: {\r\n    async getShopInfo(devNo) {\r\n      let res;\r\n      if (devNo) {\r\n        // 由扫码得到设备号进行查询\r\n        res = await this.$Q.get({ url: this.$api(`scanQcode`, devNo) });\r\n        res.prints = [res.printer];\r\n      } else {\r\n        // 附近店铺点进来进行查询\r\n        const shopCode = getApp().globalData.shopCode; // '617cd054f8c042ee91e9f21f'; //\r\n        res = await this.$Q.get({ url: this.$api(\"shopInfo\", shopCode) });\r\n      }\r\n\r\n      this.list = res;\r\n      // console.log('扫码跳转来的或者附近店铺点进来', res);\r\n      this.deviceNo = res.prints.length > 0 ? res.prints[0].deviceNo : \"\";\r\n      Array.isArray(res.shopSupports)\r\n        ? (this.supports = res.shopSupports.map((i) => i.desc))\r\n        : [];\r\n    },\r\n    radioChange(evt) {\r\n      this.deviceNo = evt.detail.value;\r\n    },\r\n    async toPrint(types) {\r\n      getApp().globalData.isPrintOrCopyOrScan = types;\r\n      if (!this.list.prints.length)\r\n        return uni.showToast({ icon: \"none\", title: \"暂无可选打印机\" });\r\n      const print = this.list.prints.filter(\r\n        (item) => item.deviceNo === this.deviceNo\r\n      )[0];\r\n      const deviceInfoList = getApp().globalData.deviceInfoList;\r\n      deviceInfoList.forEach((item) => {\r\n        getApp().globalData[item] = print[item];\r\n      });\r\n      const shopInfoList = getApp().globalData.shopInfoList;\r\n      shopInfoList.forEach((item) => {\r\n        getApp().globalData[item] = this.list[item];\r\n      });\r\n\r\n      await getApp().newFlowCode(); // 生成新的 打印流水号\r\n      if (types === \"print\") {\r\n        getApp().globalData.isNearShop = true;\r\n        this.$goToUrl(\"/pages/printSteps/choose\");\r\n      } else {\r\n        getApp().globalData.isNearShop = false;\r\n        this.$goToUrl(\"/pages/copyPages/copySetParams\");\r\n      }\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.info {\r\n  display: flex;\r\n  justify-content: flex-start;\r\n  align-items: center;\r\n\r\n  .icon-shop {\r\n    width: 130upx;\r\n    height: 130upx;\r\n  }\r\n\r\n  &-content {\r\n    display: flex;\r\n    flex-direction: column;\r\n    justify-content: space-between;\r\n    align-items: flex-start;\r\n\r\n    .shopAddress,\r\n    .support {\r\n      display: flex;\r\n      justify-content: flex-start;\r\n      align-items: center;\r\n    }\r\n\r\n    .icon-point {\r\n      width: 30upx;\r\n      height: 30upx;\r\n    }\r\n\r\n    .support-tip {\r\n      display: inline-block;\r\n      padding: 15upx 10upx;\r\n    }\r\n  }\r\n}\r\n\r\n.price {\r\n  display: flex;\r\n  flex-wrap: wrap;\r\n  justify-content: flex-start;\r\n\r\n  .price-item {\r\n    display: flex;\r\n    flex-direction: column;\r\n    justify-content: space-between;\r\n    align-items: center;\r\n    height: 80upx;\r\n    margin-right: 15upx;\r\n  }\r\n}\r\n.prints-header {\r\n  height: 36upx;\r\n  line-height: 36upx;\r\n}\r\n\r\n.radio-group {\r\n  display: flex;\r\n  flex-direction: column;\r\n  justify-content: flex-start;\r\n}\r\n\r\n.btn-container {\r\n  width: 100%;\r\n}\r\n</style>\r\n","import mod from \"-!D:\\\\softs\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--8-oneOf-1-0!D:\\\\softs\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-1!D:\\\\softs\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!D:\\\\softs\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-2!D:\\\\softs\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--8-oneOf-1-3!D:\\\\softs\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\sass-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-4!D:\\\\softs\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-5!D:\\\\softs\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\softs\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./index.vue?vue&type=style&index=0&id=e3ed4e00&lang=scss&scoped=true&\"; export default mod; export * from \"-!D:\\\\softs\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--8-oneOf-1-0!D:\\\\softs\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-1!D:\\\\softs\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!D:\\\\softs\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-2!D:\\\\softs\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--8-oneOf-1-3!D:\\\\softs\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\sass-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-4!D:\\\\softs\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-5!D:\\\\softs\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\softs\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./index.vue?vue&type=style&index=0&id=e3ed4e00&lang=scss&scoped=true&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1666443493375\n      var cssReload = require(\"D:/softs/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}